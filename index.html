<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>KimArts Print Ads</title> <!-- CHANGED TITLE -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>ðŸ“„ KimArts Print Ads</header> <!-- CHANGED HEADER TEXT -->
  <main>
    <section>
      <h2>Inventory</h2>
      <div id="dynamicInventoryItems">
        <!-- Content will be generated by JavaScript -->
      </div>
      
      <label>Price B&W: â‚±<input type="number" id="priceBW" value="1"></label>
      <label>Price Color: â‚±<input type="number" id="priceColor" value="5"></label>
      <p>Total Estimated Profit B&W: â‚±<span id="estProfitBW">0</span></p>
      <p>Total Estimated Profit Colored: â‚±<span id="estProfitColor">0</span></p>
      
      <div id="inventoryControlButtons">
        <button id="editInventoryBtn" onclick="toggleEditMode()">Edit Inventory</button>
        <button id="addPaperTypeBtn" onclick="showAddPaperModal()">Add New Paper Type</button>
        <button id="resetInventoryBtn" onclick="resetInventory()">Reset Inventory</button>
        <button id="cancelEditBtn" onclick="cancelEditMode()" style="display: none; background: #ccc;">Cancel</button>
      </div>
    </section>

    <section>
      <h2>Print Job</h2>
      <label>Paper Type:
        <select id="paperType">
          <!-- Options will be dynamically populated -->
        </select>
      </label>
      <label>Print Type:
        <select id="printType" onchange="togglePrintJobInputs()">
          <!-- Options will be dynamically populated from printJobTypes -->
        </select>
      </label>

      <!-- Standard Print Job Inputs -->
      <div id="standardPrintInputs">
        <label>B&W Pages: <input type="number" id="bw" value="0" oninput="toggleAddPrintJobButton()"></label>
        <label>Colored Pages: <input type="number" id="colored" value="0" oninput="toggleAddPrintJobButton()"></label>
        <label>Rejected B&W: <input type="number" id="rejectedBW" value="0" oninput="toggleAddPrintJobButton()"></label>
        <label>Rejected Colored: <input type="number" id="rejectedColor" value="0" oninput="toggleAddPrintJobButton()"></label>
        <button id="addPrintJobBtn" onclick="addStandardPrintJob()">Add Print Job</button>
      </div>

      <!-- Photo Bundle Job Inputs (Initially hidden) -->
      <div id="photoBundleInputs" style="display: none;">
        <label>Select Bundle:
          <select id="bundleTypeSelect"></select>
        </label>
        <label>Quantity of Bundles: <input type="number" id="bundleQuantity" value="1"></label>
        <button id="addBundleJobBtn" onclick="addPhotoBundleJob()">Add Bundle Job</button>
      </div>
      
      <button onclick="showManagePrintTypesModal()">Manage Print Types</button>
      <button onclick="showManagePhotoBundlesModal()">Manage Photo ID Bundles</button>
    </section>

    <section id="summarySection" style="grid-column: span 2;">
      <h2>Summary</h2>
      <label>Filter by Date Range:</label>
      <input type="date" id="startDate">
      <input type="date" id="endDate">
      <button onclick="filterByDate()">Apply Filter</button>
      <button onclick="clearDateFilter()">Clear Filter</button>
      <button onclick="exportToFile()">Save to File</button>
      <button onclick="printSummaryReport()">Print Report</button>

      <p id="filterDisplay">Showing all data.</p>

      <h3>Job History</h3>
      <ul id="history"></ul>

      <h3>Usage Over Time</h3>
      <canvas id="usageChart" height="100"></canvas>

      <h3>Filtered Totals</h3>
      <p>Total Profit for Period: â‚±<span id="totalProfit">0</span></p>
      <p>Total Loss for Period: â‚±<span id="totalLoss">0</span></p>
      <hr style="border: none; border-top: 1px solid #eee; margin: 15px 0;">
      <h3>Overall Potential Remaining</h3>
      <p>Total Profit Left B&W: â‚±<span id="profitLeftBW">0</span></p>
      <p>Total Profit Left Colored: â‚±<span id="profitLeftColor">0</span></p>
    </section>
  </main>

  <!-- Setup Modal HTML -->
  <div id="setupModalOverlay">
    <div id="setupModalContent">
      <h2>Initial Setup</h2>
      <p>Please set your initial inventory for default paper types and pricing.</p>
      <label>Initial A4 Sheets: <input type="number" id="setupA4Count" value="500"></label>
      <label>Initial Letter Sheets: <input type="number" id="setupLetterCount" value="500"></label>
      <label>Initial Legal Sheets: <input type="number" id="setupLegalCount" value="500"></label>
      <label>Price B&W: â‚±<input type="number" id="setupPriceBW" value="1"></label>
      <label>Price Color: â‚±<input type="number" id="setupPriceColor" value="5"></label>
      <button onclick="saveInitialSetup()">Save Setup</button>
    </div>
  </div>

  <!-- Add New Paper Type Modal HTML -->
  <div id="addPaperModalOverlay">
    <div id="addPaperModalContent">
      <h2>Add New Paper Type</h2>
      <label>Paper Type Name: <input type="text" id="newPaperTypeName" placeholder="e.g., Glossy A3"></label>
      <label>Initial Count: <input type="number" id="newPaperTypeCount" value="0"></label>
      <button onclick="addNewPaperType()">Add Paper Type</button>
      <button onclick="hideAddPaperModal()" style="background: #ccc; margin-top: 10px;">Cancel</button>
    </div>
  </div>

  <!-- Manage Print Types Modal HTML -->
  <div id="managePrintTypesModalOverlay">
    <div id="managePrintTypesModalContent">
      <h2>Manage Print Job Types</h2>
      <div class="modal-section">
        <h3>Existing Types</h3>
        <ul id="printTypeManagementList">
          <!-- Dynamically populated -->
        </ul>
        <button onclick="saveAllPrintTypeChanges()">Save Print Type Changes</button>
      </div>
      <div class="modal-section">
        <h3>Add New Type</h3>
        <label>Type Name: <input type="text" id="newPrintTypeName" placeholder="e.g., Large Format"></label>
        <label>Type:
          <select id="newPrintJobTypeCategory">
            <option value="standard">Standard Print</option>
            <option value="photo_bundle">Photo Bundle</option>
          </select>
        </label>
        <label>Price Multiplier: <input type="number" step="0.01" id="newPrintTypeMultiplier" value="1.0"></label>
        <label>Base Price: â‚±<input type="number" step="0.01" id="newPrintTypeBasePrice" value="0.0"></label>
        <label>Bundle Quantity: <input type="number" id="newPrintTypeBundleQuantity" value="0"></label>
        <button onclick="addNewPrintType()">Add New Type</button>
      </div>
      <div class="modal-buttons">
        <button onclick="hideManagePrintTypesModal()" style="background: #ccc;">Done</button>
      </div>
    </div>
  </div>

  <!-- Edit Job Modal HTML -->
  <div id="editJobModalOverlay">
    <div id="editJobModalContent">
      <h2>Edit Print Job</h2>
      <p>Editing Job ID: <span id="editJobIndexDisplay"></span></p>
      <label>Date: <input type="date" id="editJobDate"></label>
      <label>Paper Type:
        <select id="editJobPaperType">
          <!-- Options will be dynamically populated -->
        </select>
      </label>
      <label>Print Type:
        <select id="editJobPrintType">
          <!-- Options will be dynamically populated -->
        </select>
      </label>

      <!-- Fields for Standard Print Job Edit -->
      <div id="editStandardPrintFields">
        <label>B&W Pages: <input type="number" id="editJobBW"></label>
        <label>Colored Pages: <input type="number" id="editJobColored"></label>
        <label>Rejected B&W: <input type="number" id="editJobRejectedBW"></label>
        <label>Rejected Colored: <input type="number" id="editJobRejectedColor"></label>
      </div>

      <!-- Fields for Photo Bundle Job Edit -->
      <div id="editPhotoBundleFields" style="display: none;">
        <label>Bundle Name: <select id="editJobBundleName"></select></label>
        <label>Bundle Quantity: <input type="number" id="editJobBundleQuantity"></label>
      </div>

      <button onclick="saveEditedJob()">Save Changes</button>
      <button onclick="hideEditJobModal()" style="background: #ccc; margin-top: 10px;">Cancel</button>
    </div>
  </div>

  <!-- Manage Photo ID Bundles Modal HTML -->
  <div id="managePhotoBundlesModalOverlay">
    <div id="managePhotoBundlesModalContent">
      <h2>Manage Photo ID Bundles</h2>
      <div class="modal-section">
        <h3>Photo Sheet Yields (per A4 Sticker Photo Paper)</h3>
        <label>Paper Type for Bundles:
          <select id="photoBundlePaperType" onchange="updatePhotoSheetYields()"></select>
        </label>
        <label>Bundles per Sheet: <input type="number" id="bundlesPerSheet" value="0" onchange="updatePhotoSheetYields()"></label>
      </div>
      <div class="modal-section">
        <h3>Existing Bundles</h3>
        <ul id="photoBundleManagementList">
          <!-- Dynamically populated -->
        </ul>
        <button onclick="saveAllPhotoBundleChanges()">Save Bundle Changes</button>
      </div>
      <div class="modal-section">
        <h3>Add New Bundle</h3>
        <label>Bundle Name: <input type="text" id="newBundleName" placeholder="e.g., Set A"></label>
        <label>Price: â‚±<input type="number" step="0.01" id="newBundlePrice" value="0.0"></label>
        <label>2x2 Photos: <input type="number" id="newBundle2x2Count" value="0"></label>
        <label>1x1 Photos: <input type="number" id="newBundle1x1Count" value="0"></label>
        <button onclick="addNewPhotoBundle()">Add New Bundle</button>
      </div>
      <div class="modal-buttons">
        <button onclick="hideManagePhotoBundlesModal()" style="background: #ccc;">Done</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>